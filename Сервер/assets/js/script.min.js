$(function(){var b=$(".upload.files ul");$(".drop a").click(function(){$(this).parent().find("input").click()});$(".upload.files").fileupload({dropZone:$(".upload.files .drop"),add:function(d,c){var g=$('<li class="working"><input type="text" value="0" data-width="28" data-height="28" data-fgColor="#ef5f48" data-readOnly="1" data-bgColor="#3e4043" /><p></p><span></span></li>');g.find("p").text(c.files[0].name).append("<i>"+a(c.files[0].size)+"</i>");c.context=g.appendTo(b);g.find("input").knob();g.find("span").click(function(){if(g.hasClass("working")){f.abort()}g.fadeOut(function(){g.remove()})});var f=c.submit()},progress:function(d,c){var f=parseInt(c.loaded/c.total*100,10);c.context.find("input").val(f).change();if(f==100){c.context.removeClass("working")}},fail:function(d,c){c.context.addClass("error");tpl.find("span").addClass("error")}});$(document).live("drop dragover",function(c){c.preventDefault()});function a(c){if(typeof c!=="number"){return""}if(c>=1000000000){return(c/1000000000).toFixed(2)+" гб"}if(c>=1000000){return(c/1000000).toFixed(2)+" мб"}return(c/1000).toFixed(2)+" кб"}});